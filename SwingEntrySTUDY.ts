# SWINGENTRY
# WGRIFFITH2 (C) 2013

# STOCHASTICSLOW
DEF KPERIOD = 14;
DEF DPERIOD = 3;
DEF FASTLINE = ROUND(SIMPLEMOVINGAVG(100 * ((CLOSE - LOWEST(LOW, KPERIOD)) / (HIGHEST(HIGH, KPERIOD) - LOWEST(LOW, KPERIOD))), LENGTH = DPERIOD));
DEF SLOWLINE = ROUND(SIMPLEMOVINGAVG(SIMPLEMOVINGAVG(100 * ((CLOSE - LOWEST(LOW, KPERIOD)) / (HIGHEST(HIGH, KPERIOD) - LOWEST(LOW, KPERIOD))), LENGTH = DPERIOD), LENGTH = DPERIOD));

# MACD
DEF MACD = MACDHISTOGRAM("FAST LENGTH" = 5, "SLOW LENGTH" = 35, "MACD LENGTH" = 5);

# SMA9
DEF SMA = SIMPLEMOVINGAVG();

# VOLUME
DEF VOL = VOLumeAvg() > VolumeAvg(length = 60).VolAvg;

DEF GREENPRICE = 
MACD >= 0 AND
FASTLINE >= SLOWLINE;

DEF REDPRICE =
MACD < 0 AND
FASTLINE < SLOWLINE;

PLOT BULLISH = GREENPRICE
AND LOWEST(FASTLINE, 5) < 20
AND CLOSE > SMA
AND VOL;

PLOT BEARISH = REDPRICE
AND HIGHEST(FASTLINE, 5) > 80
AND CLOSE < SMA
AND VOL;

BULLISH.SETDEFAULTCOLOR(CREATECOLOR(0, 255, 0));
BULLISH.SETPAINTINGSTRATEGY(PAINTINGSTRATEGY.BOOLEAN_ARROW_UP);

BEARISH.SETDEFAULTCOLOR(CREATECOLOR(255, 0, 0));
BEARISH.SETPAINTINGSTRATEGY(PAINTINGSTRATEGY.BOOLEAN_ARROW_DOWN);

#########################################