# EXITALERT
# DREWGRIFFITH15 (C) 2015

INPUT SIDE = {DEFAULT LONG, SHORT};
INPUT TARGET = 140; # 10 days on a 30 minute chart
INPUT TRAIL = 14; # 1 day on a 30 minute chart
INPUT DISPLACE = -1;

DEF STOP;
SWITCH (SIDE) {
CASE LONG:
    STOP = CLOSE < LOWEST(LOW()[-DISPLACE], TRAIL);
CASE SHORT:
    STOP = CLOSE > HIGHEST(HIGH()[-DISPLACE], TRAIL);
}

DEF LMT;
SWITCH (SIDE) {
CASE LONG:
    LMT = CLOSE >= HIGHEST(HIGH()[-DISPLACE], TARGET);
CASE SHORT:
    LMT = CLOSE <= LOWEST(LOW()[-DISPLACE], TARGET);
}

PLOT EXIT = STOP OR LMT;
EXIT.SETDEFAULTCOLOR(CREATECOLOR(255, 255, 255));
EXIT.SETPAINTINGSTRATEGY(PAINTINGSTRATEGY.BOOLEAN_ARROW_DOWN);
